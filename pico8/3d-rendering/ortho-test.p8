pico-8 cartridge // http://www.pico-8.com
version 16
__lua__

cutedragon={verts={{0.142446,-0.124887,0.022698},{0.183308,-0.117844,0.256418},{-0.302162,-0.167723,0.025417},{-0.088076,-0.300325,0.069790},{0.158134,-0.326374,0.034835},{0.155307,-0.330356,0.260471},{-0.100417,-0.306011,0.299846},{0.146225,-0.244627,0.002998},{-0.174275,-0.258186,0.039826},{0.585106,-0.261685,0.070855},{0.601996,-0.238149,0.284662},{0.623712,-0.306829,0.290994},{0.601996,-0.307457,0.042223},{0.601996,-0.375478,0.284662},{0.585106,-0.352895,0.070855},{-0.334334,-0.161442,0.275798},{-0.219214,-0.247090,0.291397},{0.440434,-0.219962,0.247600},{0.435063,-0.226390,0.034835},{0.191860,-0.235884,0.291230},{0.413347,-0.297038,0.271118},{0.440434,-0.381133,0.247600},{0.435063,-0.368344,0.034835},{0.435063,-0.297414,0.002998},{-0.673659,-0.059461,0.106293},{-0.517015,-0.094493,0.048190},{0.175409,-0.107302,0.417156},{-0.273395,-0.100397,0.386982},{-0.212099,-0.202314,0.420036},{-0.117031,-0.282846,0.438983},{0.094698,-0.296972,0.421377},{0.150198,-0.216732,0.417156},{0.160262,-0.092736,0.689028},{0.187193,-0.090454,0.771067},{-0.206644,-0.078634,0.784693},{-0.191917,-0.118973,1.014543},{-0.180403,-0.157410,0.711997},{-0.130144,-0.219913,0.679676},{-0.109756,-0.207183,0.801923},{-0.148569,-0.174820,0.878071},{0.002640,-0.238509,0.739171},{-0.012257,-0.223605,0.893092},{0.089611,-0.179246,0.721247},{0.097840,-0.164838,0.814957},{-0.136984,-0.226432,1.150009},{-0.098562,-0.145782,1.261339},{-0.096095,-0.273600,1.106634},{0.138529,-0.317062,1.133359},{0.229564,-0.227015,0.874515},{0.349177,-0.191385,0.838128},{0.234292,-0.240236,1.079556},{0.193885,-0.275005,1.044875},{0.509997,-0.134552,0.845190},{0.330946,-0.145130,1.088636},{0.138198,-0.154666,1.250990},{0.152382,-0.267591,1.182921},{0.620236,-0.104481,0.833541},{0.554427,-0.124315,0.997449},{0.547517,-0.055092,1.012289},{0.653388,-0.071813,1.034381},{0.652587,-0.048062,1.022297},{-0.230960,-0.050208,1.127160},{-0.329207,-0.050208,1.148724},{-0.329249,-0.301405,1.240707},{-0.132902,-0.330617,1.215331},{0.235210,-0.229524,1.080394},{0.204333,-0.210712,1.133269},{0.282571,-0.210972,1.090682},{0.260973,-0.198758,1.141665},{0.293140,-0.169186,1.095308},{0.263563,-0.152319,1.140734},{0.270321,-0.200733,1.052888},{0.223217,-0.168147,1.158839},{0.093710,0.000000,0.033780},{0.163628,0.000000,0.260448},{0.142446,0.124887,0.022698},{0.183308,0.117844,0.256418},{-0.303817,0.000000,0.002998},{-0.302162,0.167723,0.025417},{-0.088076,0.300325,0.069790},{0.158134,0.326374,0.034835},{0.155307,0.330356,0.260471},{-0.100417,0.306011,0.299846},{0.146225,0.244627,0.002998},{-0.174275,0.258186,0.039826},{0.585106,0.261685,0.070855},{0.601996,0.238149,0.284662},{0.623712,0.306829,0.290994},{0.601996,0.307457,0.042223},{0.601996,0.375478,0.284662},{0.585106,0.352895,0.070855},{-0.334334,0.161442,0.275798},{-0.219214,0.247090,0.291397},{0.440434,0.219962,0.247600},{0.435063,0.226390,0.034835},{0.191860,0.235884,0.291230},{0.413347,0.297038,0.271118},{0.440434,0.381133,0.247600},{0.435063,0.368344,0.034835},{0.435063,0.297414,0.002998},{-0.363062,0.000000,0.305012},{-0.828278,0.000000,0.074101},{-0.673659,0.059461,0.106293},{-0.517015,0.000000,0.016547},{-0.517015,0.094493,0.048190},{0.183812,0.000000,0.417156},{0.175409,0.107302,0.417156},{-0.315188,0.000000,0.352245},{-0.273395,0.100397,0.386982},{-0.241530,0.000000,0.536170},{-0.212099,0.202314,0.420036},{-0.117031,0.282846,0.438983},{0.094698,0.296972,0.421377},{0.150198,0.216732,0.417156},{0.183812,0.000000,0.678288},{0.160262,0.092736,0.689028},{0.216978,0.000000,0.756438},{0.187193,0.090454,0.771067},{-0.206644,0.078634,0.784693},{-0.218099,0.000000,0.865587},{-0.191917,0.118973,1.014543},{-0.205300,0.000000,0.991335},{-0.180403,0.157410,0.711997},{-0.130144,0.219913,0.679676},{-0.109756,0.207183,0.801923},{-0.148569,0.174820,0.878071},{0.002640,0.238509,0.739171},{-0.012257,0.223605,0.893092},{0.089611,0.179246,0.721247},{0.097840,0.164838,0.814957},{-0.136984,0.226432,1.150009},{-0.098562,0.145782,1.261339},{-0.096095,0.273600,1.106634},{0.138529,0.317062,1.133359},{0.229564,0.227015,0.874515},{0.349177,0.191385,0.838128},{0.234292,0.240236,1.079556},{0.193885,0.275005,1.044875},{0.509997,0.134552,0.845190},{0.330946,0.145130,1.088636},{0.535554,0.000000,0.822755},{0.178620,0.000000,1.258231},{0.337091,0.000000,1.110735},{0.138198,0.154666,1.250990},{0.152382,0.267591,1.182921},{0.629878,0.000000,0.809092},{0.620236,0.104481,0.833541},{0.554427,0.124315,0.997449},{0.547517,0.055092,1.012289},{0.571124,0.000000,0.998565},{0.697656,0.000000,0.922443},{0.657462,0.000000,0.984677},{0.653388,0.071813,1.034381},{0.652587,0.048062,1.022297},{-0.079630,0.000000,1.396230},{-0.341531,0.000000,1.379036},{-0.268900,0.000000,1.255555},{-0.192796,0.000000,1.109792},{-0.230960,0.050208,1.127160},{-0.292698,0.000000,1.104172},{-0.329207,0.050208,1.148724},{-0.427380,0.000000,1.156856},{-0.331619,0.000000,1.192176},{-0.329249,0.301405,1.240707},{-0.132902,0.330617,1.215331},{0.235210,0.229524,1.080394},{0.204333,0.210712,1.133269},{0.282571,0.210972,1.090682},{0.260973,0.198758,1.141665},{0.293140,0.169186,1.095308},{0.263563,0.152319,1.140734},{0.270321,0.200733,1.052888},{0.223217,0.168147,1.158839}},edges={{0.142446,-0.124887},{-0.124887,0.022698},{0.022698,0.142446},{0.183308,-0.117844},{-0.117844,0.256418},{0.256418,0.183308},{-0.302162,-0.167723},{-0.167723,0.025417},{0.025417,-0.302162},{-0.088076,-0.300325},{-0.300325,0.069790},{0.069790,-0.088076},{0.158134,-0.326374},{-0.326374,0.034835},{0.034835,0.158134},{0.155307,-0.330356},{-0.330356,0.260471},{0.260471,0.155307},{-0.100417,-0.306011},{-0.306011,0.299846},{0.299846,-0.100417},{0.146225,-0.244627},{-0.244627,0.002998},{0.002998,0.146225},{-0.174275,-0.258186},{-0.258186,0.039826},{0.039826,-0.174275},{0.585106,-0.261685},{-0.261685,0.070855},{0.070855,0.585106},{0.601996,-0.238149},{-0.238149,0.284662},{0.284662,0.601996},{0.623712,-0.306829},{-0.306829,0.290994},{0.290994,0.623712},{0.601996,-0.307457},{-0.307457,0.042223},{0.042223,0.601996},{0.601996,-0.375478},{-0.375478,0.284662},{0.284662,0.601996},{0.585106,-0.352895},{-0.352895,0.070855},{0.070855,0.585106},{-0.334334,-0.161442},{-0.161442,0.275798},{0.275798,-0.334334},{-0.219214,-0.247090},{-0.247090,0.291397},{0.291397,-0.219214},{0.440434,-0.219962},{-0.219962,0.247600},{0.247600,0.440434},{0.435063,-0.226390},{-0.226390,0.034835},{0.034835,0.435063},{0.191860,-0.235884},{-0.235884,0.291230},{0.291230,0.191860},{0.413347,-0.297038},{-0.297038,0.271118},{0.271118,0.413347},{0.440434,-0.381133},{-0.381133,0.247600},{0.247600,0.440434},{0.435063,-0.368344},{-0.368344,0.034835},{0.034835,0.435063},{0.435063,-0.297414},{-0.297414,0.002998},{0.002998,0.435063},{-0.673659,-0.059461},{-0.059461,0.106293},{0.106293,-0.673659},{-0.517015,-0.094493},{-0.094493,0.048190},{0.048190,-0.517015},{0.175409,-0.107302},{-0.107302,0.417156},{0.417156,0.175409},{-0.273395,-0.100397},{-0.100397,0.386982},{0.386982,-0.273395},{-0.212099,-0.202314},{-0.202314,0.420036},{0.420036,-0.212099},{-0.117031,-0.282846},{-0.282846,0.438983},{0.438983,-0.117031},{0.094698,-0.296972},{-0.296972,0.421377},{0.421377,0.094698},{0.150198,-0.216732},{-0.216732,0.417156},{0.417156,0.150198},{0.160262,-0.092736},{-0.092736,0.689028},{0.689028,0.160262},{0.187193,-0.090454},{-0.090454,0.771067},{0.771067,0.187193},{-0.206644,-0.078634},{-0.078634,0.784693},{0.784693,-0.206644},{-0.191917,-0.118973},{-0.118973,1.014543},{1.014543,-0.191917},{-0.180403,-0.157410},{-0.157410,0.711997},{0.711997,-0.180403},{-0.130144,-0.219913},{-0.219913,0.679676},{0.679676,-0.130144},{-0.109756,-0.207183},{-0.207183,0.801923},{0.801923,-0.109756},{-0.148569,-0.174820},{-0.174820,0.878071},{0.878071,-0.148569},{0.002640,-0.238509},{-0.238509,0.739171},{0.739171,0.002640},{-0.012257,-0.223605},{-0.223605,0.893092},{0.893092,-0.012257},{0.089611,-0.179246},{-0.179246,0.721247},{0.721247,0.089611},{0.097840,-0.164838},{-0.164838,0.814957},{0.814957,0.097840},{-0.136984,-0.226432},{-0.226432,1.150009},{1.150009,-0.136984},{-0.098562,-0.145782},{-0.145782,1.261339},{1.261339,-0.098562},{-0.096095,-0.273600},{-0.273600,1.106634},{1.106634,-0.096095},{0.138529,-0.317062},{-0.317062,1.133359},{1.133359,0.138529},{0.229564,-0.227015},{-0.227015,0.874515},{0.874515,0.229564},{0.349177,-0.191385},{-0.191385,0.838128},{0.838128,0.349177},{0.234292,-0.240236},{-0.240236,1.079556},{1.079556,0.234292},{0.193885,-0.275005},{-0.275005,1.044875},{1.044875,0.193885},{0.509997,-0.134552},{-0.134552,0.845190},{0.845190,0.509997},{0.330946,-0.145130},{-0.145130,1.088636},{1.088636,0.330946},{0.138198,-0.154666},{-0.154666,1.250990},{1.250990,0.138198},{0.152382,-0.267591},{-0.267591,1.182921},{1.182921,0.152382},{0.620236,-0.104481},{-0.104481,0.833541},{0.833541,0.620236},{0.554427,-0.124315},{-0.124315,0.997449},{0.997449,0.554427},{0.547517,-0.055092},{-0.055092,1.012289},{1.012289,0.547517},{0.653388,-0.071813},{-0.071813,1.034381},{1.034381,0.653388},{0.652587,-0.048062},{-0.048062,1.022297},{1.022297,0.652587},{-0.230960,-0.050208},{-0.050208,1.127160},{1.127160,-0.230960},{-0.329207,-0.050208},{-0.050208,1.148724},{1.148724,-0.329207},{-0.329249,-0.301405},{-0.301405,1.240707},{1.240707,-0.329249},{-0.132902,-0.330617},{-0.330617,1.215331},{1.215331,-0.132902},{0.235210,-0.229524},{-0.229524,1.080394},{1.080394,0.235210},{0.204333,-0.210712},{-0.210712,1.133269},{1.133269,0.204333},{0.282571,-0.210972},{-0.210972,1.090682},{1.090682,0.282571},{0.260973,-0.198758},{-0.198758,1.141665},{1.141665,0.260973},{0.293140,-0.169186},{-0.169186,1.095308},{1.095308,0.293140},{0.263563,-0.152319},{-0.152319,1.140734},{1.140734,0.263563},{0.270321,-0.200733},{-0.200733,1.052888},{1.052888,0.270321},{0.223217,-0.168147},{-0.168147,1.158839},{1.158839,0.223217},{0.093710,0.000000},{0.000000,0.033780},{0.033780,0.093710},{0.163628,0.000000},{0.000000,0.260448},{0.260448,0.163628},{0.142446,0.124887},{0.124887,0.022698},{0.022698,0.142446},{0.183308,0.117844},{0.117844,0.256418},{0.256418,0.183308},{-0.303817,0.000000},{0.000000,0.002998},{0.002998,-0.303817},{-0.302162,0.167723},{0.167723,0.025417},{0.025417,-0.302162},{-0.088076,0.300325},{0.300325,0.069790},{0.069790,-0.088076},{0.158134,0.326374},{0.326374,0.034835},{0.034835,0.158134},{0.155307,0.330356},{0.330356,0.260471},{0.260471,0.155307},{-0.100417,0.306011},{0.306011,0.299846},{0.299846,-0.100417},{0.146225,0.244627},{0.244627,0.002998},{0.002998,0.146225},{-0.174275,0.258186},{0.258186,0.039826},{0.039826,-0.174275},{0.585106,0.261685},{0.261685,0.070855},{0.070855,0.585106},{0.601996,0.238149},{0.238149,0.284662},{0.284662,0.601996},{0.623712,0.306829},{0.306829,0.290994},{0.290994,0.623712},{0.601996,0.307457},{0.307457,0.042223},{0.042223,0.601996},{0.601996,0.375478},{0.375478,0.284662},{0.284662,0.601996},{0.585106,0.352895},{0.352895,0.070855},{0.070855,0.585106},{-0.334334,0.161442},{0.161442,0.275798},{0.275798,-0.334334},{-0.219214,0.247090},{0.247090,0.291397},{0.291397,-0.219214},{0.440434,0.219962},{0.219962,0.247600},{0.247600,0.440434},{0.435063,0.226390},{0.226390,0.034835},{0.034835,0.435063},{0.191860,0.235884},{0.235884,0.291230},{0.291230,0.191860},{0.413347,0.297038},{0.297038,0.271118},{0.271118,0.413347},{0.440434,0.381133},{0.381133,0.247600},{0.247600,0.440434},{0.435063,0.368344},{0.368344,0.034835},{0.034835,0.435063},{0.435063,0.297414},{0.297414,0.002998},{0.002998,0.435063},{-0.363062,0.000000},{0.000000,0.305012},{0.305012,-0.363062},{-0.828278,0.000000},{0.000000,0.074101},{0.074101,-0.828278},{-0.673659,0.059461},{0.059461,0.106293},{0.106293,-0.673659},{-0.517015,0.000000},{0.000000,0.016547},{0.016547,-0.517015},{-0.517015,0.094493},{0.094493,0.048190},{0.048190,-0.517015},{0.183812,0.000000},{0.000000,0.417156},{0.417156,0.183812},{0.175409,0.107302},{0.107302,0.417156},{0.417156,0.175409},{-0.315188,0.000000},{0.000000,0.352245},{0.352245,-0.315188},{-0.273395,0.100397},{0.100397,0.386982},{0.386982,-0.273395},{-0.241530,0.000000},{0.000000,0.536170},{0.536170,-0.241530},{-0.212099,0.202314},{0.202314,0.420036},{0.420036,-0.212099},{-0.117031,0.282846},{0.282846,0.438983},{0.438983,-0.117031},{0.094698,0.296972},{0.296972,0.421377},{0.421377,0.094698},{0.150198,0.216732},{0.216732,0.417156},{0.417156,0.150198},{0.183812,0.000000},{0.000000,0.678288},{0.678288,0.183812},{0.160262,0.092736},{0.092736,0.689028},{0.689028,0.160262},{0.216978,0.000000},{0.000000,0.756438},{0.756438,0.216978},{0.187193,0.090454},{0.090454,0.771067},{0.771067,0.187193},{-0.206644,0.078634},{0.078634,0.784693},{0.784693,-0.206644},{-0.218099,0.000000},{0.000000,0.865587},{0.865587,-0.218099},{-0.191917,0.118973},{0.118973,1.014543},{1.014543,-0.191917},{-0.205300,0.000000},{0.000000,0.991335},{0.991335,-0.205300},{-0.180403,0.157410},{0.157410,0.711997},{0.711997,-0.180403},{-0.130144,0.219913},{0.219913,0.679676},{0.679676,-0.130144},{-0.109756,0.207183},{0.207183,0.801923},{0.801923,-0.109756},{-0.148569,0.174820},{0.174820,0.878071},{0.878071,-0.148569},{0.002640,0.238509},{0.238509,0.739171},{0.739171,0.002640},{-0.012257,0.223605},{0.223605,0.893092},{0.893092,-0.012257},{0.089611,0.179246},{0.179246,0.721247},{0.721247,0.089611},{0.097840,0.164838},{0.164838,0.814957},{0.814957,0.097840},{-0.136984,0.226432},{0.226432,1.150009},{1.150009,-0.136984},{-0.098562,0.145782},{0.145782,1.261339},{1.261339,-0.098562},{-0.096095,0.273600},{0.273600,1.106634},{1.106634,-0.096095},{0.138529,0.317062},{0.317062,1.133359},{1.133359,0.138529},{0.229564,0.227015},{0.227015,0.874515},{0.874515,0.229564},{0.349177,0.191385},{0.191385,0.838128},{0.838128,0.349177},{0.234292,0.240236},{0.240236,1.079556},{1.079556,0.234292},{0.193885,0.275005},{0.275005,1.044875},{1.044875,0.193885},{0.509997,0.134552},{0.134552,0.845190},{0.845190,0.509997},{0.330946,0.145130},{0.145130,1.088636},{1.088636,0.330946},{0.535554,0.000000},{0.000000,0.822755},{0.822755,0.535554},{0.178620,0.000000},{0.000000,1.258231},{1.258231,0.178620},{0.337091,0.000000},{0.000000,1.110735},{1.110735,0.337091},{0.138198,0.154666},{0.154666,1.250990},{1.250990,0.138198},{0.152382,0.267591},{0.267591,1.182921},{1.182921,0.152382},{0.629878,0.000000},{0.000000,0.809092},{0.809092,0.629878},{0.620236,0.104481},{0.104481,0.833541},{0.833541,0.620236},{0.554427,0.124315},{0.124315,0.997449},{0.997449,0.554427},{0.547517,0.055092},{0.055092,1.012289},{1.012289,0.547517},{0.571124,0.000000},{0.000000,0.998565},{0.998565,0.571124},{0.697656,0.000000},{0.000000,0.922443},{0.922443,0.697656},{0.657462,0.000000},{0.000000,0.984677},{0.984677,0.657462},{0.653388,0.071813},{0.071813,1.034381},{1.034381,0.653388},{0.652587,0.048062},{0.048062,1.022297},{1.022297,0.652587},{-0.079630,0.000000},{0.000000,1.396230},{1.396230,-0.079630},{-0.341531,0.000000},{0.000000,1.379036},{1.379036,-0.341531},{-0.268900,0.000000},{0.000000,1.255555},{1.255555,-0.268900},{-0.192796,0.000000},{0.000000,1.109792},{1.109792,-0.192796},{-0.230960,0.050208},{0.050208,1.127160},{1.127160,-0.230960},{-0.292698,0.000000},{0.000000,1.104172},{1.104172,-0.292698},{-0.329207,0.050208},{0.050208,1.148724},{1.148724,-0.329207},{-0.427380,0.000000},{0.000000,1.156856},{1.156856,-0.427380},{-0.331619,0.000000},{0.000000,1.192176},{1.192176,-0.331619},{-0.329249,0.301405},{0.301405,1.240707},{1.240707,-0.329249},{-0.132902,0.330617},{0.330617,1.215331},{1.215331,-0.132902},{0.235210,0.229524},{0.229524,1.080394},{1.080394,0.235210},{0.204333,0.210712},{0.210712,1.133269},{1.133269,0.204333},{0.282571,0.210972},{0.210972,1.090682},{1.090682,0.282571},{0.260973,0.198758},{0.198758,1.141665},{1.141665,0.260973},{0.293140,0.169186},{0.169186,1.095308},{1.095308,0.293140},{0.263563,0.152319},{0.152319,1.140734},{1.140734,0.263563},{0.270321,0.200733},{0.200733,1.052888},{1.052888,0.270321},{0.223217,0.168147},{0.168147,1.158839},{1.158839,0.223217},{74,2},{2,1},{1,74},{3,74},{74,1},{1,3},{4,6},{6,7},{7,4},{1,9},{9,3},{3,1},{8,4},{4,9},{9,8},{10,12},{12,13},{13,10},{12,15},{15,13},{13,12},{3,17},{17,16},{16,3},{17,4},{4,7},{7,17},{2,19},{19,1},{1,2},{20,18},{18,2},{2,20},{6,21},{21,20},{20,6},{5,22},{22,6},{6,5},{5,24},{24,23},{23,5},{8,19},{19,24},{24,8},{18,10},{10,19},{19,18},{21,11},{11,18},{18,21},{21,14},{14,12},{12,21},{22,15},{15,14},{14,22},{24,15},{15,23},{23,24},{24,10},{10,13},{13,24},{101,25},{25,16},{16,101},{78,26},{26,104},{104,78},{16,26},{26,3},{3,16},{75,27},{27,2},{2,75},{38,29},{29,30},{30,38},{16,108},{108,101},{101,16},{17,28},{28,16},{16,17},{17,30},{30,29},{29,17},{37,110},{110,29},{29,37},{28,29},{29,110},{110,28},{7,31},{31,30},{30,7},{33,32},{32,27},{27,33},{20,31},{31,6},{6,20},{20,27},{27,32},{32,20},{107,115},{115,106},{106,107},{41,30},{30,31},{31,41},{33,117},{117,34},{34,33},{36,120},{120,35},{35,36},{35,110},{110,37},{37,35},{37,39},{39,40},{40,37},{35,40},{40,36},{36,35},{41,39},{39,38},{38,41},{43,34},{34,44},{44,43},{41,44},{44,42},{42,41},{36,45},{45,46},{46,36},{40,47},{47,45},{45,40},{42,47},{47,39},{39,42},{49,51},{51,52},{52,49},{50,54},{54,51},{51,50},{117,53},{53,34},{34,117},{142,54},{54,143},{143,142},{44,49},{49,42},{42,44},{34,50},{50,44},{44,34},{55,51},{51,54},{54,55},{48,51},{51,56},{56,48},{42,52},{52,48},{48,42},{141,57},{57,53},{53,141},{59,54},{54,58},{58,59},{62,160},{160,158},{158,62},{53,58},{58,54},{54,53},{151,57},{57,146},{146,151},{110,108},{108,28},{28,110},{35,120},{120,110},{110,35},{57,60},{60,58},{58,57},{59,60},{60,61},{61,59},{150,61},{61,152},{152,150},{151,61},{61,60},{60,151},{163,162},{162,63},{63,163},{46,155},{155,156},{156,46},{36,158},{158,122},{122,36},{55,142},{142,155},{155,55},{46,62},{62,36},{36,46},{63,160},{160,62},{62,63},{157,63},{63,46},{46,157},{59,150},{150,143},{143,59},{143,156},{156,46},{46,143},{46,65},{65,55},{55,46},{64,45},{45,47},{47,64},{47,65},{65,64},{64,47},{65,56},{56,55},{55,65},{104,25},{25,102},{102,104},{70,68},{68,72},{72,70},{68,66},{66,72},{72,68},{67,69},{69,73},{73,67},{70,69},{69,68},{68,70},{66,69},{69,67},{67,66},{73,69},{69,71},{71,73},{77,74},{74,76},{76,77},{79,74},{74,78},{78,79},{80,82},{82,81},{81,80},{85,76},{76,79},{79,85},{80,84},{84,85},{85,80},{86,88},{88,87},{87,86},{91,88},{88,89},{89,91},{93,79},{79,92},{92,93},{93,80},{80,85},{85,93},{95,77},{77,76},{76,95},{94,96},{96,77},{77,94},{97,82},{82,96},{96,97},{98,81},{81,82},{82,98},{81,100},{100,84},{84,81},{84,95},{95,76},{76,84},{86,94},{94,95},{95,86},{87,97},{97,94},{94,87},{97,90},{90,98},{98,97},{98,91},{91,99},{99,98},{91,100},{100,99},{99,91},{100,86},{86,95},{95,100},{103,101},{101,92},{92,103},{78,105},{105,79},{79,78},{105,92},{92,79},{79,105},{107,75},{75,77},{77,107},{124,111},{111,123},{123,124},{92,108},{108,109},{109,92},{109,93},{93,92},{92,109},{93,112},{112,83},{83,93},{110,123},{123,111},{111,110},{109,110},{110,111},{111,109},{83,113},{113,82},{82,83},{116,114},{114,129},{129,116},{113,96},{96,82},{82,113},{96,107},{107,77},{77,96},{127,112},{112,124},{124,127},{116,117},{117,115},{115,116},{121,120},{120,122},{122,121},{110,119},{119,123},{123,110},{123,125},{125,124},{124,123},{119,126},{126,123},{123,119},{125,127},{127,124},{124,125},{129,118},{118,116},{116,129},{127,130},{130,129},{129,127},{121,131},{131,126},{126,121},{126,133},{133,125},{125,126},{133,128},{128,125},{125,133},{135,137},{137,136},{136,135},{136,140},{140,139},{139,136},{139,117},{117,118},{118,139},{142,140},{140,144},{144,142},{135,130},{130,128},{128,135},{136,118},{118,130},{130,136},{144,137},{137,145},{145,144},{137,134},{134,145},{145,137},{138,128},{128,134},{134,138},{147,141},{141,139},{139,147},{140,149},{149,148},{148,140},{159,158},{158,160},{160,159},{148,139},{139,140},{140,148},{151,146},{146,147},{147,151},{110,109},{109,108},{108,110},{119,110},{110,120},{120,119},{153,147},{147,148},{148,153},{149,153},{153,148},{148,149},{150,154},{154,149},{149,150},{151,154},{154,152},{152,151},{163,161},{161,162},{162,163},{132,155},{155,144},{144,132},{121,158},{158,159},{159,121},{144,155},{155,142},{142,144},{159,132},{132,121},{121,159},{160,161},{161,159},{159,160},{161,157},{157,132},{132,161},{149,143},{143,150},{150,149},{143,132},{132,156},{156,143},{165,132},{132,144},{144,165},{164,131},{131,132},{132,164},{133,165},{165,134},{134,133},{165,145},{145,134},{134,165},{104,103},{103,105},{105,104},{170,172},{172,168},{168,170},{168,172},{172,166},{166,168},{167,173},{173,169},{169,167},{169,170},{170,168},{168,169},{166,169},{169,168},{168,166},{173,171},{171,169},{169,173},{43,31},{31,32},{32,43},{129,113},{113,127},{127,129},{115,27},{27,106},{106,115},{157,46},{46,156},{156,157},{132,157},{157,156},{156,132},{74,75},{75,2},{2,74},{3,78},{78,74},{74,3},{4,5},{5,6},{6,4},{1,8},{8,9},{9,1},{8,5},{5,4},{4,8},{10,11},{11,12},{12,10},{12,14},{14,15},{15,12},{3,9},{9,17},{17,3},{17,9},{9,4},{4,17},{2,18},{18,19},{19,2},{20,21},{21,18},{18,20},{6,22},{22,21},{21,6},{5,23},{23,22},{22,5},{5,8},{8,24},{24,5},{8,1},{1,19},{19,8},{18,11},{11,10},{10,18},{21,12},{12,11},{11,21},{21,22},{22,14},{14,21},{22,23},{23,15},{15,22},{24,13},{13,15},{15,24},{24,19},{19,10},{10,24},{101,102},{102,25},{25,101},{78,3},{3,26},{26,78},{16,25},{25,26},{26,16},{75,106},{106,27},{27,75},{38,37},{37,29},{29,38},{16,28},{28,108},{108,16},{17,29},{29,28},{28,17},{17,7},{7,30},{30,17},{7,6},{6,31},{31,7},{33,43},{43,32},{32,33},{20,32},{32,31},{31,20},{20,2},{2,27},{27,20},{107,116},{116,115},{115,107},{41,38},{38,30},{30,41},{33,115},{115,117},{117,33},{36,122},{122,120},{120,36},{37,38},{38,39},{39,37},{35,37},{37,40},{40,35},{41,42},{42,39},{39,41},{43,33},{33,34},{34,43},{41,43},{43,44},{44,41},{36,40},{40,45},{45,36},{40,39},{39,47},{47,40},{42,48},{48,47},{47,42},{49,50},{50,51},{51,49},{50,53},{53,54},{54,50},{117,141},{141,53},{53,117},{142,55},{55,54},{54,142},{44,50},{50,49},{49,44},{34,53},{53,50},{50,34},{55,56},{56,51},{51,55},{48,52},{52,51},{51,48},{42,49},{49,52},{52,42},{141,146},{146,57},{57,141},{59,143},{143,54},{54,59},{53,57},{57,58},{58,53},{57,151},{151,60},{60,57},{59,58},{58,60},{60,59},{150,59},{59,61},{61,150},{151,152},{152,61},{61,151},{46,55},{55,155},{155,46},{36,62},{62,158},{158,36},{46,63},{63,62},{62,46},{63,162},{162,160},{160,63},{157,163},{163,63},{63,157},{46,64},{64,65},{65,46},{64,46},{46,45},{45,64},{47,48},{48,65},{65,47},{65,48},{48,56},{56,65},{104,26},{26,25},{25,104},{70,71},{71,69},{69,70},{66,68},{68,69},{69,66},{77,75},{75,74},{74,77},{79,76},{76,74},{74,79},{80,83},{83,82},{82,80},{85,84},{84,76},{76,85},{80,81},{81,84},{84,80},{86,89},{89,88},{88,86},{91,90},{90,88},{88,91},{93,85},{85,79},{79,93},{93,83},{83,80},{80,93},{95,94},{94,77},{77,95},{94,97},{97,96},{96,94},{97,98},{98,82},{82,97},{98,99},{99,81},{81,98},{81,99},{99,100},{100,81},{84,100},{100,95},{95,84},{86,87},{87,94},{94,86},{87,88},{88,97},{97,87},{97,88},{88,90},{90,97},{98,90},{90,91},{91,98},{91,89},{89,100},{100,91},{100,89},{89,86},{86,100},{103,102},{102,101},{101,103},{78,104},{104,105},{105,78},{105,103},{103,92},{92,105},{107,106},{106,75},{75,107},{124,112},{112,111},{111,124},{92,101},{101,108},{108,92},{109,111},{111,93},{93,109},{93,111},{111,112},{112,93},{83,112},{112,113},{113,83},{116,107},{107,114},{114,116},{113,114},{114,96},{96,113},{96,114},{114,107},{107,96},{127,113},{113,112},{112,127},{116,118},{118,117},{117,116},{121,119},{119,120},{120,121},{123,126},{126,125},{125,123},{119,121},{121,126},{126,119},{125,128},{128,127},{127,125},{129,130},{130,118},{118,129},{127,128},{128,130},{130,127},{121,132},{132,131},{131,121},{126,131},{131,133},{133,126},{133,134},{134,128},{128,133},{135,138},{138,137},{137,135},{136,137},{137,140},{140,136},{139,141},{141,117},{117,139},{142,143},{143,140},{140,142},{135,136},{136,130},{130,135},{136,139},{139,118},{118,136},{144,140},{140,137},{137,144},{137,138},{138,134},{134,137},{138,135},{135,128},{128,138},{147,146},{146,141},{141,147},{140,143},{143,149},{149,140},{148,147},{147,139},{139,148},{153,151},{151,147},{147,153},{149,154},{154,153},{153,149},{150,152},{152,154},{154,150},{151,153},{153,154},{154,151},{132,156},{156,155},{155,132},{121,122},{122,158},{158,121},{159,161},{161,132},{132,159},{160,162},{162,161},{161,160},{161,163},{163,157},{157,161},{165,164},{164,132},{132,165},{164,133},{133,131},{131,164},{133,164},{164,165},{165,133},{165,144},{144,145},{145,165},{104,102},{102,103},{103,104},{169,171},{171,170},{170,169},{166,167},{167,169},{169,166},{43,41},{41,31},{31,43},{129,114},{114,113},{113,129},{115,33},{33,27},{27,115}}}

function floor(tileSize, gridSize)
	obj = {}
	obj["verts"] = {}
	obj["edges"] = {}
	for x=-gridSize,gridSize do
		obj["verts"][#obj["verts"]+1] = {x*tileSize,  gridSize*tileSize, 0}
		obj["verts"][#obj["verts"]+1] = {x*tileSize, -gridSize*tileSize, 0}
		if (x == 0) then c = 3 else c = 5 end
		obj["edges"][#obj["edges"]+1] = {#obj["verts"]-1, #obj["verts"], c}
	end
	for y=-gridSize,gridSize do
		obj["verts"][#obj["verts"]+1] = { gridSize*tileSize, y*tileSize, 0}
		obj["verts"][#obj["verts"]+1] = {-gridSize*tileSize, y*tileSize, 0}
		if (y == 0) then c = 8 else c = 5 end
		obj["edges"][#obj["edges"]+1] = {#obj["verts"]-1, #obj["verts"], c}
	end
	return obj
end

function tri(size)
	size = size/2
	obj = {}
	obj["verts"] = {
		{-size, 0, -size},
		{ size, 0, -size},
		{    0, 0,  size}
	}
	obj["edges"] = {
		{1, 2}, {2, 3}, {3, 1}
	}
	return obj
end

function ortho(vertex)
	return {
		128 - (camera.size*vertex[1] + 64),
		128 - (camera.size*vertex[3] + 64),
	}
end

function rotate(v, r)
	nv = {};
	
	-- rotate in x
	nv[1] = v[1]
	nv[2] = cos(r[1])*v[2] + -sin(r[1])*v[3]
	nv[3] = sin(r[1])*v[2] +  cos(r[1])*v[3]
	v = nv
	
	-- rotate in y
	nv[1] =  cos(r[2])*v[1] + sin(r[2])*v[3]
	nv[2] =  v[2]
	nv[3] = -sin(r[2])*v[1] + cos(r[2])*v[3]
	v = nv
	
	-- rotate in z
	nv[1] = cos(r[3])*v[1] + -sin(r[3])*v[2]
	nv[2] = sin(r[3])*v[1] +  cos(r[3])*v[2]
	nv[3] = v[3]
	v = nv
	
	return v
end

function translate(v, p)
	nv = {}
	nv[1] = v[1]+p[1]
	nv[2] = v[2]+p[2]
	nv[3] = v[3]+p[3]
	return nv
end

function _draw()
	cls(0)

	for _, obj in pairs(scene) do
		-- draw verticies
		obj["tVerts"] = {} -- transformed verts
		for i, vertex in pairs(obj["verts"]) do
			obj["tVerts"][i] = 
				rotate(translate(vertex, camera.position), camera.rotation)

			-- convert to 2d
			obj["points"][i] = ortho(obj["tVerts"][i])
		end

		for _, edge in pairs(obj["edges"]) do
			if (edge[3]) then
				c = edge[3]
			else
				c = 7
			end

			if (obj["points"][edge[1]] == nil or
			    obj["points"][edge[2]] == nil) then
				goto continue end

			line(
				obj["points"][edge[1]][1],
				obj["points"][edge[1]][2],
				obj["points"][edge[2]][1],
				obj["points"][edge[2]][2],
			c)
			
			::continue::
		end
	end

	if     (render.mode==0) then print("\x8e rotation", 1, 122)
	elseif (render.mode==1) then print("\x8e position", 1, 122)
	else                         print("\x8e scale", 1, 122)
	end
end

function _update60()
	if (render.mode == 0) then
		if (btn(0)) camera.rotation[3] += camera.rotationSpeed
		if (btn(1)) camera.rotation[3] -= camera.rotationSpeed
		if (btn(2)) camera.rotation[1] -= camera.rotationSpeed
		if (btn(3)) camera.rotation[1] += camera.rotationSpeed
	elseif (render.mode == 1) then
		if (btn(0)) camera.position[1] -= camera.positionSpeed
		if (btn(1)) camera.position[1] += camera.positionSpeed
		if (btn(2)) camera.position[3] -= camera.positionSpeed
		if (btn(3)) camera.position[3] += camera.positionSpeed
	elseif (render.mode == 2) then
		if (btn(2)) camera.size += camera.sizeSpeed
		if (btn(3)) camera.size -= camera.sizeSpeed
	end

	if (btnp(4)) then
		if     (render.mode==0) then render.mode = 1
		elseif (render.mode==1) then render.mode = 2
		else                         render.mode = 0
		end
	end
	--if (btn(5)) camera.size -= camera.sizeSpeed

	if (camera.size < 0) camera.size = 0
end

function _init()
	
	render = {
		mode = 0 -- rotation, position, scale
	}

	scene = {
		floor(1, 2),
		cutedragon
	}

	for _, obj in pairs(scene) do
		obj["points"] = {}
	end

	camera = {
		size = 24,
		sizeSpeed = 2,

		rotation = {0.06, 0, 0.1},
		rotationSpeed = 0.012,

		position = {0, 0, 0},
		positionSpeed = 0.12,
	}

end

